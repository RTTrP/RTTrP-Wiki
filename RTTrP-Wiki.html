<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title>Real-Time Tracking Protocol</title>
    <script src="document.min.js" userjs="user.js" icon="favicon.ico" id="DOC" onerror="var l=document.createElement('link'),s=document.createElement('script');l.rel='stylesheet';l.href='http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css';l.id='bootstrap.css';l.auto='1';document.head.insertBefore(l,document.getElementById('DOC'));s.src='http://aplib.github.io/document.min.js';document.head.appendChild(s);"></script>
</head>
<body>
    
<!--fixed-top-bar
[navbar]
* [General Information](index.html)
    * [RTTrP](index.html)
    * [RTTrPM](RTTrPM.html)
    * [RTTrPL](RTTrPL.html)
* [Wiki](wiki.html)
    * [Home](wiki.html)
    * [RTTrP](RTTrP-Wiki.html)
    * [RTTrPM](RTTrPM-Wiki.html)
    * [RTTrPL](RTTrPL-Wiki.html)
[/navbar]
-->
<!--header-panel
# **About RTTrP**
-->

<!--content-panel
## **Data Structures**

RTTrP is simply a packet header, which encapsulates RTTrPL, RTTrPM or RTTrPA packets. An RTTrP Packet contains any number of packet<br/>
modules, either Output modules (RTTrPL) or Trackable modules (RTTrPM/A), but not both. Each type contains other packet modules nested<br/>
within, which contain further information. 

For RTTrPL, Output modules contain a number of nested modules which contain information about specific DMX universes and the channels<br/>
being controlled. Whereas for RTTrPM/A Trackable modules contain other modules which provide information about the motion of a specific<br/>
tracked object.

## **General Information**

The Integer Signature field is always one of two values to define Endinaness of the integer type fields in a packet. To distinguish an<br/>
RTTrPL packet from an RTTrPM or RTTrPA packet, the Floating Point Signature Fields should be set to the following:

* **RTTrPL**: Big Endian - 0x4434, Little Endian - 0x3444
* **RTTrPM/A**: Big Endian - 0x4334, Little Endian - 0x3443

Lastly, the context field is a user definable field that can be used for any purpose. See the section [Application Specific Use Cases](#application-specific-use-cases)<br/>
for examples of how this field is used.

The conceptual drawing below describes the breakdown of an RTTrP Packet.

![RTTrP Packet Structure](https://github.com/RTTrP/RTTrP-Wiki/blob/master/Images/RTTrP.PNG?raw=true)

**Note**: When outputting Tracked Point position/acceleration/velocity, there is a single module **for each point**

# Packet Structure

## **Real-Time Tracking Protocol (RTTrP) Header**

Field | Name | Type | Size (bytes) | Description
------|------|------------------------|--------------|-------------
0 | Header / Integer Signature | UInt16 | 2 | Big Endian: 0x4154, Little Endian: 0x5441
1 | Header / Float Signature | UInt16 | 2 | Big Endian: 0x4434 (RTTrPL) / 0x4334 (RTTrPM/A), Little Endian: 0x3444 (RTTrPL) / 0x3443 (RTTrPM/A)
2 | Version | UInt16 | 2 | Value = 0x0002
3 | Packet ID | UInt32 | 4 | Packet sequence number
4 | Packet Format | UInt8 | 1 | Value = 0x00 (Raw), 0x01 (Protobuf), 0x02 (Thrift)
5 | Size | UInt16 | 2 | Size of packet in bytes including header	
6 | Context | UInt32 | 4 | User definable
7 | Number of Packet Modules | Uint8 | 2 |  Number of Trackable/Fixture Modules 
8 | Packet Module 0 | Packet Module | variable | 
9 | Packet Module 1 | Packet Module | variable | 
... | ...

# **Application Specific Use Cases**

The BlackTrax Tracking System makes use of the Context field in the following ways:

* **RTTrPL**: The context field acts as the "Chapter" that is currently being used, starting from 0. A BlackTrax Chapter is a data<br/>
structure which contains a set of fixtures, tracking points and settings for how BlackTrax instructs the fixtures to track the object(s)<br/>
within the chapter. Any fixture present in an RTTrPL packet with a specific chapter number in the Context field is a fixture being controlled<br/>
in that specific BlackTrax chapter.

* **RTTrPM**: The context field is always set to -1 (0xFFFFFFFF) as Trackable information sent out of BlackTrax as RTTrPM does not use<br/>Chapter data and does not depend on any fixtures/moving lights.

# **Data types**

double -> IEEE 754-1985 binary64
-->

<!--footer-panel
Please keep in mind, this repository (and its branches) are not used in the same manner as a typical repository. You cannot pull or commit changes to this repository as there is no code. All information on the protocols are contained in the README files, and information is also available in the [Wiki] (https://github.com/CAST-Software/RTTrP-v1.8.7.0/wiki). If you have questions or concerns regarding the repository or any information herein, please contact:

Marty Cochrane: marty.cochrane@blacktrax.ca<br>
Joe Zampino: joseph@blacktrax.ca
-->


<noscript><div class="alert alert-warning">This Website requires your browser to be JavaScript enabled.</div></noscript>
</body>
</html>
